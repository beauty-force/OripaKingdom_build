import{L as h,H as f,r as u,o as n,c as i,b as m,w as y,F as x,d as e,J as l,a2 as b,K as d,h as a,n as k,t as p}from"./app.6db07015.js";import{A as v}from"./Admin.c9394756.js";import{V as w,r as C,a as S}from"./ArrowLongUpIcon.b962a6d7.js";import{_ as V}from"./_plugin-vue_export-helper.cdc0426e.js";import"./toastify.24a0c38e.js";const E={components:{Link:h,Head:f,AdminLayout:v,draggable:w,ArrowLongUpIcon:C,ArrowLongDownIcon:S},props:{errors:Object,auth:Object},data(){return{subject:"",userType:"all",customEmails:"",emailContent:"",selectedRank:0,message:"",error:"",isSending:!1}},methods:{async sendEmail(){if(!this.emailContent.trim()){alert("\u30E1\u30FC\u30EB\u5185\u5BB9\u3092\u5165\u529B\u3057\u3066\u304F\u3060\u3055\u3044");return}this.message="",this.error="";let r={subject:this.subject,type:this.userType,content:this.emailContent};if(this.userType==="custom"?r.emails=this.customEmails.split(",").map(s=>s.trim()):this.userType==="customRank"&&(r.rank=this.selectedRank),confirm("\u30E1\u30FC\u30EB\u3092\u9001\u308A\u307E\u3059\u304B\uFF1F")){this.isSending=!0;try{axios.post(route("admin.email.send"),r).then(s=>{this.message=s.data.message,this.isSending=!1})}catch{this.error="\u30E1\u30FC\u30EB\u9001\u4FE1\u306B\u5931\u6557\u3057\u307E\u3057\u305F\u3002\u5F8C\u3067\u3082\u3046\u4E00\u5EA6\u304A\u8A66\u3057\u304F\u3060\u3055\u3044\u3002",this.isSending=!1}}}}},T={class:"p-6"},j=e("h2",{class:"text-xl font-semibold mb-4"},"\u30E1\u30FC\u30EB\u9001\u4FE1",-1),L={class:"mb-4"},R=e("label",{class:"block text-gray-700 text-sm font-bold mb-2",for:"userType"},"\u9001\u4FE1\u5148:",-1),A=e("option",{value:"all"},"\u5168\u3066\u306E\u30E6\u30FC\u30B6\u30FC",-1),U=e("option",{value:"custom"},"\u7279\u5B9A\u306E\u30E6\u30FC\u30B6\u30FC",-1),D=e("option",{value:"customRank"},"\u7279\u5B9A\u30E9\u30F3\u30AF\u306E\u30E6\u30FC\u30B6\u30FC",-1),H=[A,U,D],N={key:0,class:"mb-4"},B=e("label",{class:"block text-gray-700 text-sm font-bold mb-2",for:"customEmails"},"\u30E1\u30FC\u30EB\u30A2\u30C9\u30EC\u30B9\u3092\u5165\u529B (\u30AB\u30F3\u30DE\u3067\u533A\u5207\u3063\u3066\u8907\u6570\u9001\u4FE1\u53EF\u80FD)",-1),I={key:1,class:"mb-4"},F=e("label",{class:"block text-gray-700 text-sm font-bold mb-2",for:"rank"},"\u30E9\u30F3\u30AF\u3092\u9078\u629E",-1),M=e("option",{value:"0"},"\u30E9\u30F3\u30AF\u306A\u3057",-1),O=e("option",{value:"1"},"\u30EC\u30AE\u30E5\u30E9\u30FC",-1),q=e("option",{value:"2"},"\u30D6\u30ED\u30F3\u30BA",-1),z=e("option",{value:"3"},"\u30B7\u30EB\u30D0\u30FC",-1),J=e("option",{value:"4"},"\u30B4\u30FC\u30EB\u30C9",-1),K=e("option",{value:"5"},"\u30D7\u30E9\u30C1\u30CA",-1),P=e("option",{value:"6"},"VIP",-1),G=[M,O,q,z,J,K,P],Q={class:"mb-4"},W=e("label",{for:"subject",class:"block text-gray-700 text-sm font-bold mb-2"},"\u4EF6\u540D:",-1),X={class:"mb-4"},Y=e("label",{class:"block text-gray-700 text-sm font-bold mb-2",for:"emailContent"},"\u30E1\u30FC\u30EB\u5185\u5BB9",-1),Z=["disabled"],$={key:0},ee={key:1},oe={key:2,class:"mt-4 text-green-600"},se={key:3,class:"mt-4 text-red-600"};function te(r,s,ne,ie,o,c){const _=u("Head"),g=u("AdminLayout");return n(),i(x,null,[m(_,{title:"\u30E1\u30FC\u30EB\u3092\u9001\u4FE1"}),m(g,null,{default:y(()=>[e("div",T,[j,e("div",L,[R,l(e("select",{"onUpdate:modelValue":s[0]||(s[0]=t=>o.userType=t),class:"block w-full bg-white border border-gray-300 rounded py-2 px-3 text-gray-700 focus:outline-none focus:border-indigo-500"},H,512),[[b,o.userType]])]),o.userType==="custom"?(n(),i("div",N,[B,l(e("textarea",{"onUpdate:modelValue":s[1]||(s[1]=t=>o.customEmails=t),rows:"3",class:"block w-full bg-white border border-gray-300 rounded py-2 px-3 text-gray-700 focus:outline-none focus:border-indigo-500"},null,512),[[d,o.customEmails]])])):a("",!0),o.userType==="customRank"?(n(),i("div",I,[F,l(e("select",{"onUpdate:modelValue":s[2]||(s[2]=t=>o.selectedRank=t),class:"block w-full bg-white border border-gray-300 rounded py-2 px-3 text-gray-700 focus:outline-none focus:border-indigo-500"},G,512),[[b,o.selectedRank]])])):a("",!0),e("div",Q,[W,l(e("input",{"onUpdate:modelValue":s[3]||(s[3]=t=>o.subject=t),type:"text",id:"subject",class:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",placeholder:"\u30E1\u30FC\u30EB\u306E\u4EF6\u540D\u3092\u5165\u529B",required:""},null,512),[[d,o.subject]])]),e("div",X,[Y,l(e("textarea",{"onUpdate:modelValue":s[4]||(s[4]=t=>o.emailContent=t),rows:"5",class:"block w-full bg-white border border-gray-300 rounded py-2 px-3 text-gray-700 focus:outline-none focus:border-indigo-500"},null,512),[[d,o.emailContent]])]),e("button",{onClick:s[5]||(s[5]=(...t)=>c.sendEmail&&c.sendEmail(...t)),class:k(["mt-4 w-full bg-blue-600 text-white font-semibold py-2 rounded-md shadow transition duration-200",{"bg-gray-400":o.isSending,"cursor-not-allowed":o.isSending,"hover:bg-blue-700":!o.isSending}]),disabled:o.isSending},[o.isSending?(n(),i("span",$,"\u9001\u4FE1\u4E2D...")):(n(),i("span",ee,"\u30E1\u30FC\u30EB\u3092\u9001\u4FE1"))],10,Z),o.message?(n(),i("div",oe,p(o.message),1)):a("",!0),o.error?(n(),i("div",se,p(o.error),1)):a("",!0)])]),_:1})],64)}const ue=V(E,[["render",te]]);export{ue as default};
